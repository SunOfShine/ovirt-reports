<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="BR10B" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="832" leftMargin="5" rightMargin="5" topMargin="5" bottomMargin="5" resourceBundle="ovirt_reports_bundle" whenResourceMissingType="Error">
	<property name="ireport.jasperserver.reportUnit" value="/organizations/ovirtreports/Reports/Trend/Virtual_machines/single_vm_resources_days_week_BR10B"/>
	<property name="ireport.jasperserver.url" value="http://localhost:8080/jasperserver/services/repository"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="42"/>
	<subDataset name="Memory">
		<parameter name="P_DataCenter_ID" class="java.lang.String">
			<parameterDescription><![CDATA[Select a DataCenter]]></parameterDescription>
			<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_Cluster_ID" class="java.lang.String">
			<parameterDescription><![CDATA[Select a Cluster]]></parameterDescription>
			<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_VM_ID" class="java.lang.String">
			<parameterDescription><![CDATA[Select an VM]]></parameterDescription>
			<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_Period" class="java.lang.String">
			<parameterDescription><![CDATA[Period]]></parameterDescription>
			<defaultValueExpression><![CDATA["Quarterly"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_VM_Type" class="java.lang.Integer">
			<parameterDescription><![CDATA[Select a VM Type]]></parameterDescription>
		</parameter>
		<parameter name="P_Dates" class="java.lang.String">
			<parameterDescription><![CDATA[Enter Period Month]]></parameterDescription>
		</parameter>
		<parameter name="P_Start_Date" class="java.lang.String">
			<defaultValueExpression><![CDATA["01/01/2000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_End_Date" class="java.lang.String">
			<defaultValueExpression><![CDATA["01/01/2000"]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[select distinct extract(DOW from the_date)as day_num, day_name, avg(MEM_Usage) as MEM_Usage, avg(MEM_Peak) as MEM_Peak
from	(-- VMs Max and Average MEMory Usage Peaks
	SELECT
		history_datetime AS time,
			SUM(coalesce(memory_usage_percent,0)*coalesce(minutes_in_status,0))/SUM(coalesce(minutes_in_status,0)) AS MEM_Usage,
			SUM(coalesce(max_memory_usage,0)*coalesce(minutes_in_status,0))/SUM(coalesce(minutes_in_status,0)) AS MEM_Peak
	FROM v3_0_vm_daily_history_view

	WHERE
		v3_0_vm_daily_history_view.vm_id =
			CASE $P{P_VM_ID}
				WHEN '00000000-0000-0000-0000-000000000000' THEN '00000000-0000-0000-0000-000000000000'
				WHEN null THEN '00000000-0000-0000-0000-000000000000'
				WHEN '11111111-1111-1111-1111-111111111111' THEN '00000000-0000-0000-0000-000000000000'
				ELSE cast($P{P_VM_ID} as uuid)
			END
		AND history_datetime >= cast($P{P_Start_Date} as date)
		AND history_datetime < cast($P{P_End_Date} as date) + interval '1 day'
	GROUP BY
		history_datetime) a RIGHT OUTER JOIN calendar ON (the_date = time)
where 	the_date >= cast($P{P_Start_Date} as date)
	AND the_date < cast($P{P_End_Date} as date) + interval '1 day'
group by extract(DOW from the_date), day_name
order by extract(DOW from the_date) ASC]]>
		</queryString>
		<field name="day_num" class="java.lang.Double">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="day_name" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="mem_usage" class="java.math.BigDecimal">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="mem_peak" class="java.math.BigDecimal">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
	</subDataset>
	<subDataset name="Disk_usage">
		<parameter name="P_DataCenter_ID" class="java.lang.String">
			<parameterDescription><![CDATA[Select a DataCenter]]></parameterDescription>
			<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_Cluster_ID" class="java.lang.String">
			<parameterDescription><![CDATA[Select a Cluster]]></parameterDescription>
			<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_VM_ID" class="java.lang.String">
			<parameterDescription><![CDATA[Select an VM]]></parameterDescription>
			<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_Period" class="java.lang.String">
			<parameterDescription><![CDATA[Period]]></parameterDescription>
			<defaultValueExpression><![CDATA["Quarterly"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_VM_Type" class="java.lang.Integer">
			<parameterDescription><![CDATA[Select a VM Type]]></parameterDescription>
		</parameter>
		<parameter name="P_Dates" class="java.lang.String">
			<parameterDescription><![CDATA[Enter Period Month]]></parameterDescription>
		</parameter>
		<parameter name="P_Start_Date" class="java.lang.String">
			<defaultValueExpression><![CDATA["01/01/2000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_End_Date" class="java.lang.String">
			<defaultValueExpression><![CDATA["01/01/2000"]]></defaultValueExpression>
		</parameter>
		<parameter name="Active_VMs" class="java.lang.String">
			<defaultValueExpression><![CDATA["AND delete_date IS NULL"]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[select distinct extract(DOW from the_date) as day_num, day_name, coalesce(disk_name, max(disk_name) over (partition by 1), '') as disk_name, avg(Read_Rate) as Read_Rate, avg(Write_Rate) as Write_Rate
from   (-- VMs Disk Usage (I/O) Rates
		SELECT
			CASE
				WHEN delete_date IS NULL THEN vm_internal_drive_mapping
				ELSE vm_internal_drive_mapping || '*'
			END as disk_name,
			history_datetime AS Time,
			MAX(ROUND(CAST(coalesce(read_rate_bytes_per_second, 0) AS FLOAT)::numeric /(1024*1024),1)) AS Read_Rate,
			MAX(ROUND(CAST(coalesce(write_rate_bytes_per_second, 0) AS FLOAT)::numeric /(1024*1024),1)) AS Write_Rate
		FROM v3_0_vm_disk_daily_history_view
			INNER JOIN v3_0_vm_disk_configuration_view
					ON (v3_0_vm_disk_configuration_view.vm_disk_id = v3_0_vm_disk_daily_history_view.vm_disk_id)
						INNER JOIN v3_0_disks_vm_map_view
							ON (v3_0_vm_disk_configuration_view.vm_disk_id = v3_0_disks_vm_map_view.vm_disk_id)

		WHERE
			cast(v3_0_disks_vm_map_view.vm_id as varchar) = CASE $P{P_VM_ID}
											WHEN '00000000-0000-0000-0000-000000000000' THEN '00000000-0000-0000-0000-000000000000'
											WHEN null THEN '00000000-0000-0000-0000-000000000000'
											WHEN '11111111-1111-1111-1111-111111111111' THEN '00000000-0000-0000-0000-000000000000'
											ELSE $P{P_VM_ID}
											END
			AND history_datetime >= cast($P{P_Start_Date} as timestamp)
			AND history_datetime < cast($P{P_End_Date} as date) + interval '1 day'
			AND attach_date >= cast($P{P_Start_Date} as timestamp)
			AND (detach_date IS NULL or detach_date < cast($P{P_End_Date} as date) + interval '1 day')
			AND v3_0_vm_disk_configuration_view.history_id in   (SELECT max(a.history_id)
								  FROM v3_0_vm_disk_configuration_view as a
								  WHERE v3_0_vm_disk_configuration_view.vm_disk_id = a.vm_disk_id)
			AND v3_0_vm_disk_configuration_view.vm_disk_id in    (SELECT c.vm_disk_id
								     FROM v3_0_vm_disk_daily_history_view b
									INNER JOIN v3_0_vm_disk_configuration_view c
										ON (c.vm_disk_id = b.vm_disk_id)
									INNER JOIN v3_0_disks_vm_map_view h
										ON (c.vm_disk_id = h.vm_disk_id)
								   WHERE 	h.vm_id = CASE $P{P_VM_ID}
											WHEN '00000000-0000-0000-0000-000000000000' THEN '00000000-0000-0000-0000-000000000000'
											WHEN null THEN '00000000-0000-0000-0000-000000000000'
											WHEN '11111111-1111-1111-1111-111111111111' THEN '00000000-0000-0000-0000-000000000000'
											ELSE cast($P{P_VM_ID} as uuid)
										  END
									AND history_datetime >= cast($P{P_Start_Date} as timestamp)
									AND history_datetime < cast($P{P_End_Date} as date) + interval '1 day'
									AND h.attach_date >= cast($P{P_Start_Date} as timestamp)
									AND (h.detach_date IS NULL or h.detach_date < cast($P{P_End_Date} as date) + interval '1 day')
									AND c.history_id in (SELECT max(d.history_id)
											 FROM  v3_0_vm_disk_configuration_view as d
											 WHERE c.vm_disk_id = d.vm_disk_id)
									$P!{Active_VMs}
								  Group BY c.vm_disk_id
								  ORDER BY MAX(ROUND(CAST(coalesce(b.read_rate_bytes_per_second, 0) AS FLOAT)::numeric,1)) + MAX(ROUND(CAST(coalesce(b.write_rate_bytes_per_second, 0) AS FLOAT)::numeric,1)) DESC
								  LIMIT 5)
			$P!{Active_VMs}
		GROUP BY
			disk_name,
			history_datetime) a RIGHT OUTER JOIN calendar ON (the_date = time)
where 	the_date >= cast($P{P_Start_Date} as date)
	AND the_date < cast($P{P_End_Date} as date) + interval '1 day'
group by extract(DOW from the_date), day_name, disk_name
order by extract(DOW from the_date), coalesce(disk_name, max(disk_name) over (partition by 1), '')]]>
		</queryString>
		<field name="day_num" class="java.lang.Double"/>
		<field name="day_name" class="java.lang.String"/>
		<field name="disk_name" class="java.lang.String"/>
		<field name="read_rate" class="java.math.BigDecimal"/>
		<field name="write_rate" class="java.math.BigDecimal"/>
	</subDataset>
	<subDataset name="Interfaces">
		<parameter name="P_DataCenter_ID" class="java.lang.String">
			<parameterDescription><![CDATA[Select a DataCenter]]></parameterDescription>
			<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_Cluster_ID" class="java.lang.String">
			<parameterDescription><![CDATA[Select a Cluster]]></parameterDescription>
			<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_VM_ID" class="java.lang.String">
			<parameterDescription><![CDATA[Select an VM]]></parameterDescription>
			<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_Period" class="java.lang.String">
			<parameterDescription><![CDATA[Period]]></parameterDescription>
			<defaultValueExpression><![CDATA["Quarterly"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_VM_Type" class="java.lang.Integer">
			<parameterDescription><![CDATA[Select a VM Type]]></parameterDescription>
		</parameter>
		<parameter name="P_Dates" class="java.lang.String">
			<parameterDescription><![CDATA[Enter Period Month]]></parameterDescription>
		</parameter>
		<parameter name="P_Start_Date" class="java.lang.String">
			<defaultValueExpression><![CDATA["01/01/2000"]]></defaultValueExpression>
		</parameter>
		<parameter name="P_End_Date" class="java.lang.String">
			<defaultValueExpression><![CDATA["01/01/2000"]]></defaultValueExpression>
		</parameter>
		<parameter name="Active_VMs" class="java.lang.String">
			<defaultValueExpression><![CDATA["AND delete_date IS NULL"]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[select distinct extract(DOW from the_date) as day_num, day_name, coalesce(interface_name,max(interface_name) over (partition by 1), '') as interface_name, avg(Rx_rate) as Rx_rate, avg(Tx_rate) as Tx_rate
from	(-- VMs Ethernet Interface Tx and Rx Rates
	SELECT
		v3_0_vm_interface_configuration_view.vm_interface_id,
		CASE
			WHEN delete_date IS NULL THEN v3_0_vm_interface_configuration_view.vm_interface_name
			ELSE v3_0_vm_interface_configuration_view.vm_interface_name || '*'
		END as interface_name,
		v3_0_vm_interface_daily_history_view.history_datetime AS time,
		avg(coalesce(receive_rate_percent,0)) AS Rx_rate,
		avg(coalesce(transmit_rate_percent,0)) AS Tx_rate
	FROM v3_0_vm_interface_daily_history_view
		INNER JOIN v3_0_vm_interface_configuration_view
			ON (v3_0_vm_interface_configuration_view.vm_interface_id = v3_0_vm_interface_daily_history_view.vm_interface_id)
	WHERE
		v3_0_vm_interface_configuration_view.vm_id =
			CASE $P{P_VM_ID}
				WHEN '00000000-0000-0000-0000-000000000000' THEN '00000000-0000-0000-0000-000000000000'
				WHEN null THEN '00000000-0000-0000-0000-000000000000'
				WHEN '11111111-1111-1111-1111-111111111111' THEN '00000000-0000-0000-0000-000000000000'
				ELSE cast($P{P_VM_ID} as uuid)
			END
		AND history_datetime >= cast($P{P_Start_Date} as timestamp)
		AND history_datetime < cast($P{P_End_Date} as date) + interval '1 day'
		AND v3_0_vm_interface_configuration_view.history_id in (SELECT max(a.history_id)
							       FROM v3_0_vm_interface_configuration_view as a
							       WHERE v3_0_vm_interface_configuration_view.vm_interface_id = a.vm_interface_id)
		AND v3_0_vm_interface_configuration_view.vm_interface_id in    (SELECT c.vm_interface_id
							  	   FROM v3_0_vm_interface_daily_history_view b
									INNER JOIN v3_0_vm_interface_configuration_view c
										ON (c.vm_interface_id = b.vm_interface_id)
								   WHERE 	c.vm_id = CASE $P{P_VM_ID}
											WHEN '00000000-0000-0000-0000-000000000000' THEN '00000000-0000-0000-0000-000000000000'
											WHEN null THEN '00000000-0000-0000-0000-000000000000'
											WHEN '11111111-1111-1111-1111-111111111111' THEN '00000000-0000-0000-0000-000000000000'
											ELSE cast($P{P_VM_ID} as uuid)
										  END
									AND history_datetime >= cast($P{P_Start_Date} as timestamp)
									AND history_datetime < cast($P{P_End_Date} as date) + interval '1 day'
									AND c.history_id in (SELECT max(d.history_id)
											 FROM v3_0_vm_interface_configuration_view as d
											 WHERE c.vm_interface_id = d.vm_interface_id)
									$P!{Active_VMs}
								  Group BY c.vm_interface_id
								  ORDER BY avg(coalesce(b.receive_rate_percent,0)) + avg(coalesce(b.transmit_rate_percent,0)) DESC
								  LIMIT 3)
		$P!{Active_VMs}
	Group BY
		v3_0_vm_interface_configuration_view.vm_interface_id, interface_name,
		v3_0_vm_interface_daily_history_view.history_datetime) as a RIGHT OUTER JOIN calendar as b ON (a.time = b.the_date)
where b.the_date >= cast($P{P_Start_Date} as timestamp)
      AND b.the_date < cast($P{P_End_Date} as date) + interval '1 day'
group by extract(DOW from the_date), day_name, interface_name
order by extract(DOW from the_date) ASC]]>
		</queryString>
		<field name="day_num" class="java.lang.Double"/>
		<field name="day_name" class="java.lang.String"/>
		<field name="interface_name" class="java.lang.String"/>
		<field name="rx_rate" class="java.math.BigDecimal"/>
		<field name="tx_rate" class="java.math.BigDecimal"/>
	</subDataset>
	<parameter name="P_DataCenter_ID" class="java.lang.String">
		<parameterDescription><![CDATA[Select a DataCenter]]></parameterDescription>
		<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
	</parameter>
	<parameter name="P_Cluster_ID" class="java.lang.String">
		<parameterDescription><![CDATA[Select a Cluster]]></parameterDescription>
		<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
	</parameter>
	<parameter name="P_VM_ID" class="java.lang.String">
		<parameterDescription><![CDATA[Select a Virtual Machine]]></parameterDescription>
		<defaultValueExpression><![CDATA["00000000-0000-0000-0000-000000000000"]]></defaultValueExpression>
	</parameter>
	<parameter name="P_Period" class="java.lang.String">
		<parameterDescription><![CDATA[Period]]></parameterDescription>
		<defaultValueExpression><![CDATA["Quarterly"]]></defaultValueExpression>
	</parameter>
	<parameter name="P_Dates" class="java.lang.String">
		<parameterDescription><![CDATA[Enter Period Month]]></parameterDescription>
		<defaultValueExpression><![CDATA["April 2019"]]></defaultValueExpression>
	</parameter>
	<parameter name="REPORT_NAME" class="java.lang.String" isForPrompting="false"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Program Files\\jasperserver-pro-3.7\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="P_VM_Type" class="java.lang.Integer"/>
	<parameter name="P_End_Date" class="java.lang.String">
		<defaultValueExpression><![CDATA["01/01/2000"]]></defaultValueExpression>
	</parameter>
	<parameter name="P_Start_Date" class="java.lang.String">
		<defaultValueExpression><![CDATA["01/01/2000"]]></defaultValueExpression>
	</parameter>
	<parameter name="Active_VMs" class="java.lang.String">
		<defaultValueExpression><![CDATA["AND delete_date IS NULL"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select distinct extract(DOW from the_date) as day_num, day_name, avg(CPU_Usage) as CPU_Usage, avg(CPU_Peak) as CPU_Peak
from	(-- VMs Max and Average CPU Usage Peaks
	SELECT
		history_datetime AS time,
      		SUM(coalesce(cpu_usage_percent,0)*coalesce(minutes_in_status,0))/SUM(coalesce(minutes_in_status,0)) AS CPU_Usage,
		SUM(coalesce(max_cpu_usage,0)*coalesce(minutes_in_status,0))/SUM(coalesce(minutes_in_status,0)) AS CPU_Peak
	FROM v3_0_vm_daily_history_view
	WHERE
		v3_0_vm_daily_history_view.vm_id =
			CASE $P{P_VM_ID}
				WHEN '00000000-0000-0000-0000-000000000000' THEN '00000000-0000-0000-0000-000000000000'
				WHEN null THEN '00000000-0000-0000-0000-000000000000'
				WHEN '11111111-1111-1111-1111-111111111111' THEN '00000000-0000-0000-0000-000000000000'
				ELSE cast($P{P_VM_ID} as uuid)
			END
		AND history_datetime >= cast($P{P_Start_Date} as timestamp)
		AND history_datetime < cast($P{P_End_Date} as date) + interval '1 day'
	GROUP By
		history_datetime) a RIGHT OUTER JOIN calendar ON (the_date = time)
where 	the_date >= cast($P{P_Start_Date} as date)
	AND the_date < cast($P{P_End_Date} as date) + interval '1 day'
group by extract(DOW from the_date), day_name
order by extract(DOW from the_date) ASC]]>
	</queryString>
	<field name="day_num" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="day_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cpu_usage" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cpu_peak" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="CURRENT_PAGE_NUMBER" class="java.lang.Integer" resetType="None" incrementType="Page">
		<variableExpression><![CDATA[$V{PAGE_NUMBER}]]></variableExpression>
		<initialValueExpression><![CDATA[]]></initialValueExpression>
	</variable>
	<group name="VM">
		<groupExpression><![CDATA[$P{P_VM_ID}]]></groupExpression>
		<groupFooter>
			<band height="379">
				<barChart>
					<chart customizerClass="com.ovirt.reports.jasper.BarChartCustomizer" theme="ReportsLineBarChartTheme">
						<reportElement x="421" y="1" width="408" height="185"/>
						<box>
							<pen lineWidth="1.0" lineColor="#3C617F"/>
							<topPen lineWidth="1.0" lineColor="#3C617F"/>
							<leftPen lineWidth="1.0" lineColor="#3C617F"/>
							<bottomPen lineWidth="1.0" lineColor="#3C617F"/>
							<rightPen lineWidth="1.0" lineColor="#3C617F"/>
						</box>
						<chartTitle>
							<font fontName="DejaVu Sans"/>
							<titleExpression><![CDATA[$R{br10b.chart.memory.usage}]]></titleExpression>
						</chartTitle>
						<chartSubtitle>
							<font fontName="DejaVu Sans"/>
						</chartSubtitle>
						<chartLegend>
							<font fontName="DejaVu Sans"/>
						</chartLegend>
					</chart>
					<categoryDataset>
						<dataset>
							<datasetRun subDataset="Memory">
								<parametersMapExpression><![CDATA[$P{REPORT_PARAMETERS_MAP}]]></parametersMapExpression>
								<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
							</datasetRun>
						</dataset>
						<categorySeries>
							<seriesExpression><![CDATA[$R{br10.chart.series.memory.usage}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{day_name}.substring(0,3)]]></categoryExpression>
							<valueExpression><![CDATA[$F{mem_usage}]]></valueExpression>
							<itemHyperlink>
								<hyperlinkTooltipExpression><![CDATA[$F{mem_usage}.setScale(2, RoundingMode.HALF_UP).toString()]]></hyperlinkTooltipExpression>
							</itemHyperlink>
						</categorySeries>
						<categorySeries>
							<seriesExpression><![CDATA[$R{br10.chart.series.memory.peak}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{day_name}.substring(0,3)]]></categoryExpression>
							<valueExpression><![CDATA[$F{mem_peak}]]></valueExpression>
							<itemHyperlink>
								<hyperlinkTooltipExpression><![CDATA[$F{mem_peak}.setScale(2, RoundingMode.HALF_UP).toString()]]></hyperlinkTooltipExpression>
							</itemHyperlink>
						</categorySeries>
					</categoryDataset>
					<barPlot>
						<plot/>
						<itemLabel color="#000000" backgroundColor="#FFFFFF">
							<font fontName="DejaVu Sans"/>
						</itemLabel>
						<categoryAxisLabelExpression><![CDATA[$R{axis.day}]]></categoryAxisLabelExpression>
						<categoryAxisFormat>
							<axisFormat labelColor="#666666" verticalTickLabels="false">
								<labelFont>
									<font fontName="DejaVu Sans"/>
								</labelFont>
								<tickLabelFont>
									<font fontName="SansSerif"/>
								</tickLabelFont>
							</axisFormat>
						</categoryAxisFormat>
						<valueAxisLabelExpression><![CDATA[$R{axis.memory.usage.percent}]]></valueAxisLabelExpression>
						<valueAxisFormat>
							<axisFormat labelColor="#666666" verticalTickLabels="false">
								<labelFont>
									<font fontName="DejaVu Sans"/>
								</labelFont>
								<tickLabelFont>
									<font fontName="DejaVu Sans"/>
								</tickLabelFont>
							</axisFormat>
						</valueAxisFormat>
						<rangeAxisMinValueExpression><![CDATA[0]]></rangeAxisMinValueExpression>
						<rangeAxisMaxValueExpression><![CDATA[100]]></rangeAxisMaxValueExpression>
					</barPlot>
				</barChart>
				<barChart>
					<chart customizerClass="com.ovirt.reports.jasper.BarChartCustomizer" theme="ReportsLineBarChartTheme">
						<reportElement x="421" y="192" width="408" height="185"/>
						<box>
							<pen lineWidth="1.0" lineColor="#3C617F"/>
							<topPen lineWidth="1.0" lineColor="#3C617F"/>
							<leftPen lineWidth="1.0" lineColor="#3C617F"/>
							<bottomPen lineWidth="1.0" lineColor="#3C617F"/>
							<rightPen lineWidth="1.0" lineColor="#3C617F"/>
						</box>
						<chartTitle>
							<font fontName="DejaVu Sans"/>
							<titleExpression><![CDATA[$R{br10b.chart.network.usage}]]></titleExpression>
						</chartTitle>
						<chartSubtitle>
							<font fontName="DejaVu Sans"/>
							<subtitleExpression><![CDATA[$P{Active_VMs}.contains("AND".subSequence(0,2)) ? null :  $R{br10.chart.network.subtitle.deleted}]]></subtitleExpression>
						</chartSubtitle>
						<chartLegend>
							<font fontName="DejaVu Sans"/>
						</chartLegend>
					</chart>
					<categoryDataset>
						<dataset>
							<datasetRun subDataset="Interfaces">
								<parametersMapExpression><![CDATA[$P{REPORT_PARAMETERS_MAP}]]></parametersMapExpression>
								<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
							</datasetRun>
						</dataset>
						<categorySeries>
							<seriesExpression><![CDATA[$F{interface_name} + $R{br10.chart.series.rx}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{day_name}.substring(0,3)]]></categoryExpression>
							<valueExpression><![CDATA[$F{rx_rate}]]></valueExpression>
							<itemHyperlink>
								<hyperlinkTooltipExpression><![CDATA[msg($R{br10.chart.series.tooltip.network}, $F{interface_name}, str("br10.chart.series.rx"), $F{rx_rate}.setScale(2, RoundingMode.HALF_UP).toString())]]></hyperlinkTooltipExpression>
							</itemHyperlink>
						</categorySeries>
						<categorySeries>
							<seriesExpression><![CDATA[$F{interface_name} + $R{br10.chart.series.tx}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{day_name}.substring(0,3)]]></categoryExpression>
							<valueExpression><![CDATA[$F{tx_rate}]]></valueExpression>
							<itemHyperlink>
								<hyperlinkTooltipExpression><![CDATA[msg($R{br10.chart.series.tooltip.network}, $F{interface_name}, str("br10.chart.series.tx"), $F{tx_rate}.setScale(2, RoundingMode.HALF_UP).toString())]]></hyperlinkTooltipExpression>
							</itemHyperlink>
						</categorySeries>
					</categoryDataset>
					<barPlot>
						<plot/>
						<itemLabel color="#000000" backgroundColor="#FFFFFF">
							<font fontName="DejaVu Sans"/>
						</itemLabel>
						<categoryAxisLabelExpression><![CDATA[$R{axis.day}]]></categoryAxisLabelExpression>
						<categoryAxisFormat>
							<axisFormat labelColor="#666666" verticalTickLabels="false">
								<labelFont>
									<font fontName="DejaVu Sans"/>
								</labelFont>
								<tickLabelFont>
									<font fontName="SansSerif"/>
								</tickLabelFont>
							</axisFormat>
						</categoryAxisFormat>
						<valueAxisLabelExpression><![CDATA[$R{axis.network.usage.percent}]]></valueAxisLabelExpression>
						<valueAxisFormat>
							<axisFormat labelColor="#666666" verticalTickLabels="false">
								<labelFont>
									<font fontName="DejaVu Sans"/>
								</labelFont>
								<tickLabelFont>
									<font fontName="DejaVu Sans"/>
								</tickLabelFont>
							</axisFormat>
						</valueAxisFormat>
						<rangeAxisMinValueExpression><![CDATA[0]]></rangeAxisMinValueExpression>
						<rangeAxisMaxValueExpression><![CDATA[100]]></rangeAxisMaxValueExpression>
					</barPlot>
				</barChart>
				<barChart>
					<chart customizerClass="com.ovirt.reports.jasper.BarChartCustomizer" theme="ReportsLineBarChartTheme">
						<reportElement x="2" y="192" width="408" height="185"/>
						<box>
							<pen lineWidth="1.0" lineColor="#3C617F"/>
							<topPen lineWidth="1.0" lineColor="#3C617F"/>
							<leftPen lineWidth="1.0" lineColor="#3C617F"/>
							<bottomPen lineWidth="1.0" lineColor="#3C617F"/>
							<rightPen lineWidth="1.0" lineColor="#3C617F"/>
						</box>
						<chartTitle>
							<font fontName="DejaVu Sans"/>
							<titleExpression><![CDATA[$R{br10b.chart.disks.usage}]]></titleExpression>
						</chartTitle>
						<chartSubtitle>
							<font fontName="DejaVu Sans"/>
							<subtitleExpression><![CDATA[$P{Active_VMs}.contains("AND".subSequence(0,2)) ? null :  $R{br10.chart.disks.subtitle.deleted}]]></subtitleExpression>
						</chartSubtitle>
						<chartLegend>
							<font fontName="DejaVu Sans"/>
						</chartLegend>
					</chart>
					<categoryDataset>
						<dataset>
							<datasetRun subDataset="Disk_usage">
								<parametersMapExpression><![CDATA[$P{REPORT_PARAMETERS_MAP}]]></parametersMapExpression>
								<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
							</datasetRun>
						</dataset>
						<categorySeries>
							<seriesExpression><![CDATA[$F{disk_name} + $R{br10.chart.series.read}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{day_name}.substring(0,3)]]></categoryExpression>
							<valueExpression><![CDATA[$F{read_rate}]]></valueExpression>
							<itemHyperlink>
								<hyperlinkTooltipExpression><![CDATA[msg($R{br10.chart.series.tooltip.disks}, $F{disk_name}, str("br10.chart.series.read"), $F{read_rate}.setScale(2, RoundingMode.HALF_UP).toString())]]></hyperlinkTooltipExpression>
							</itemHyperlink>
						</categorySeries>
						<categorySeries>
							<seriesExpression><![CDATA[$F{disk_name} + $R{br10.chart.series.write}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{day_name}.substring(0,3)]]></categoryExpression>
							<valueExpression><![CDATA[$F{write_rate}]]></valueExpression>
							<itemHyperlink>
								<hyperlinkTooltipExpression><![CDATA[msg($R{br10.chart.series.tooltip.disks}, $F{disk_name}, str("br10.chart.series.write"), $F{write_rate}.setScale(2, RoundingMode.HALF_UP).toString())]]></hyperlinkTooltipExpression>
							</itemHyperlink>
						</categorySeries>
					</categoryDataset>
					<barPlot>
						<plot/>
						<itemLabel color="#000000" backgroundColor="#FFFFFF">
							<font fontName="DejaVu Sans"/>
						</itemLabel>
						<categoryAxisLabelExpression><![CDATA[$R{axis.day}]]></categoryAxisLabelExpression>
						<categoryAxisFormat>
							<axisFormat labelColor="#666666" verticalTickLabels="false">
								<labelFont>
									<font fontName="DejaVu Sans"/>
								</labelFont>
								<tickLabelFont>
									<font fontName="SansSerif"/>
								</tickLabelFont>
							</axisFormat>
						</categoryAxisFormat>
						<valueAxisLabelExpression><![CDATA[$R{axis.disks.usage.mb.pre.second}]]></valueAxisLabelExpression>
						<valueAxisFormat>
							<axisFormat labelColor="#666666" verticalTickLabels="false">
								<labelFont>
									<font fontName="DejaVu Sans"/>
								</labelFont>
								<tickLabelFont>
									<font fontName="DejaVu Sans"/>
								</tickLabelFont>
							</axisFormat>
						</valueAxisFormat>
						<rangeAxisMinValueExpression><![CDATA[0]]></rangeAxisMinValueExpression>
					</barPlot>
				</barChart>
				<barChart>
					<chart customizerClass="com.ovirt.reports.jasper.BarChartCustomizer" theme="ReportsLineBarChartTheme">
						<reportElement x="2" y="1" width="408" height="185"/>
						<box>
							<pen lineWidth="1.0" lineColor="#3C617F"/>
							<topPen lineWidth="1.0" lineColor="#3C617F"/>
							<leftPen lineWidth="1.0" lineColor="#3C617F"/>
							<bottomPen lineWidth="1.0" lineColor="#3C617F"/>
							<rightPen lineWidth="1.0" lineColor="#3C617F"/>
						</box>
						<chartTitle>
							<font fontName="DejaVu Sans"/>
							<titleExpression><![CDATA[$R{br10b.chart.cpu.usage}]]></titleExpression>
						</chartTitle>
						<chartSubtitle>
							<font fontName="DejaVu Sans"/>
						</chartSubtitle>
						<chartLegend>
							<font fontName="DejaVu Sans"/>
						</chartLegend>
					</chart>
					<categoryDataset>
						<categorySeries>
							<seriesExpression><![CDATA[$R{br10.chart.series.cpu.usage}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{day_name}.substring(0,3)]]></categoryExpression>
							<valueExpression><![CDATA[$F{cpu_usage}]]></valueExpression>
							<itemHyperlink>
								<hyperlinkTooltipExpression><![CDATA[$F{cpu_usage}.setScale(2, RoundingMode.HALF_UP).toString()]]></hyperlinkTooltipExpression>
							</itemHyperlink>
						</categorySeries>
						<categorySeries>
							<seriesExpression><![CDATA[$R{br10.chart.series.cpu.peak}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{day_name}.substring(0,3)]]></categoryExpression>
							<valueExpression><![CDATA[$F{cpu_peak}]]></valueExpression>
							<itemHyperlink>
								<hyperlinkTooltipExpression><![CDATA[$F{cpu_peak}.setScale(2, RoundingMode.HALF_UP).toString()]]></hyperlinkTooltipExpression>
							</itemHyperlink>
						</categorySeries>
					</categoryDataset>
					<barPlot>
						<plot/>
						<itemLabel color="#000000" backgroundColor="#FFFFFF">
							<font fontName="DejaVu Sans"/>
						</itemLabel>
						<categoryAxisLabelExpression><![CDATA[$R{axis.day}]]></categoryAxisLabelExpression>
						<categoryAxisFormat>
							<axisFormat labelColor="#666666" verticalTickLabels="false">
								<labelFont>
									<font fontName="DejaVu Sans"/>
								</labelFont>
								<tickLabelFont>
									<font fontName="SansSerif"/>
								</tickLabelFont>
							</axisFormat>
						</categoryAxisFormat>
						<valueAxisLabelExpression><![CDATA[$R{axis.cpu.usage.percent}]]></valueAxisLabelExpression>
						<valueAxisFormat>
							<axisFormat labelColor="#666666" verticalTickLabels="false">
								<labelFont>
									<font fontName="DejaVu Sans"/>
								</labelFont>
								<tickLabelFont>
									<font fontName="DejaVu Sans"/>
								</tickLabelFont>
							</axisFormat>
						</valueAxisFormat>
						<rangeAxisMinValueExpression><![CDATA[0]]></rangeAxisMinValueExpression>
						<rangeAxisMaxValueExpression><![CDATA[100]]></rangeAxisMaxValueExpression>
					</barPlot>
				</barChart>
			</band>
		</groupFooter>
	</group>
	<title>
		<band height="191">
			<subreport>
				<reportElement x="2" y="45" width="830" height="145"/>
				<subreportParameter name="P_Cluster_ID">
					<subreportParameterExpression><![CDATA[$P{P_Cluster_ID}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="P_Period">
					<subreportParameterExpression><![CDATA[$P{P_Period}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="P_DataCenter_ID">
					<subreportParameterExpression><![CDATA[$P{P_DataCenter_ID}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="P_Start_Date">
					<subreportParameterExpression><![CDATA[$P{P_Start_Date}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="P_VM_ID">
					<subreportParameterExpression><![CDATA[$P{P_VM_ID}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="P_Dates">
					<subreportParameterExpression><![CDATA[$P{P_Dates}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="P_VM_Type">
					<subreportParameterExpression><![CDATA[$P{P_VM_Type}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="P_End_Date">
					<subreportParameterExpression><![CDATA[$P{P_End_Date}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA["repo:br2 full details.jrxml"]]></subreportExpression>
			</subreport>
			<line>
				<reportElement x="0" y="43" width="832" height="1"/>
			</line>
			<textField pattern="">
				<reportElement x="546" y="27" width="286" height="15"/>
				<textElement textAlignment="Right">
					<font fontName="DejaVu Sans" size="11" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[DateFormat.getDateInstance(DateFormat.LONG, $P{REPORT_LOCALE}).format(new Date())]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="0" y="0" width="228" height="42"/>
				<imageExpression><![CDATA["repo:ovirt-icon"]]></imageExpression>
			</image>
		</band>
	</title>
	<pageFooter>
		<band height="15" splitType="Stretch">
			<textField evaluationTime="Auto">
				<reportElement x="286" y="1" width="260" height="13"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="DejaVu Sans"/>
				</textElement>
				<textFieldExpression><![CDATA[msg($R{footer.pagination}, $V{CURRENT_PAGE_NUMBER}, $V{PAGE_NUMBER})]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
